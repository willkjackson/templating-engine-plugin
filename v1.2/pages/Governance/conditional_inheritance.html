

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Conditional Inheritance Examples &mdash; Jenkins Templating Engine  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/banner.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Library Development" href="../Library_Development/index.html" />
    <link rel="prev" title="Governance Model" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Jenkins Templating Engine
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Templating/index.html">Pipeline Templating</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Templating/configuration_files/index.html">Configuration Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Templating/configuration_files/default_step_implementation.html">Default Step Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Templating/configuration_files/sandboxing.html">Sandboxing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Templating/primitives/index.html">Primitives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Templating/primitives/application_environments.html">Application Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Templating/primitives/keywords.html">Keywords</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Templating/primitives/stages.html">Stages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Governance Model</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Conditional Inheritance Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Library_Development/index.html">Library Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Library_Development/externalizing_config.html">Externalizing Library Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Library_Development/library_sources.html">Library Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Library_Development/lifecycle_hooks.html">Leverage Lifecycle Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Library_Development/noncall_methods.html">Defining Non-Call Methods in Library Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Library_Development/validate_library_parameters.html">Validate Library Parameters</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Jenkins Templating Engine</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Governance Model</a> &raquo;</li>
        
      <li>Conditional Inheritance Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/pages/Governance/conditional_inheritance.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  


    
    



    <p class="scv-banner scv-sphinx_rtd_theme"><a href="../../../master/pages/Governance/conditional_inheritance.html"><b>Warning:</b> This document is for an old version of Jenkins Templating Engine. The main version is master.</a></p>
<div class="section" id="conditional-inheritance-examples">
<span id="id1"></span><h1>Conditional Inheritance Examples<a class="headerlink" href="#conditional-inheritance-examples" title="Permalink to this headline">¶</a></h1>
<p>The JTE configuration file DSL allows you to build arbitrary nested key-value pair
structures.</p>
<p>The merging of two configuration files assumes that by default, if a key has already
been set it may not be overridden unless explictly allowed via the <code class="docutils literal"><span class="pre">merge</span></code> and
<code class="docutils literal"><span class="pre">override</span></code> flags.</p>
<p>We will walk through an example of what happens when neither of these flags have been
set for a configuration block, as well as the result of adding one of the flags to a block.</p>
<div class="section" id="strict-governance-no-customization">
<h2>1. Strict Governance: No Customization<a class="headerlink" href="#strict-governance-no-customization" title="Permalink to this headline">¶</a></h2>
<p>Let’s say that a Governance Tier has defined the application environments to be used
by all applications within it’s purview:</p>
<p><strong>Governance Tier Configuration File</strong></p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">application_environments</span><span class="p">{</span>
    <span class="n">dev</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Development&quot;</span>
    <span class="p">}</span>
    <span class="n">prod</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Production&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now let’s assume an application’s configuration file attempts to add their own application
environment to the configuration:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">application_environments</span><span class="p">{</span>
    <span class="n">impl</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Implementation&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this example, the application’s configuration will be ignored because it’s parent configuration
has not allowed modifications to the <code class="docutils literal"><span class="pre">application_environments</span></code> key</p>
</div>
<div class="section" id="mergeable-configurations">
<h2>2. Mergeable Configurations<a class="headerlink" href="#mergeable-configurations" title="Permalink to this headline">¶</a></h2>
<p>Now let’s say the Governance Tier wanted to allow this sort of customization.</p>
<p>By setting <code class="docutils literal"><span class="pre">merge</span> <span class="pre">=</span> <span class="pre">true</span></code> within the <code class="docutils literal"><span class="pre">application_environments</span></code> block, the Governance Tier is
saying that new keys may be added to the block.  In this case - this means allowing subconfigurations
to append their own application environments.</p>
<p><strong>Governance Tier Configuration</strong>:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">application_environments</span><span class="p">{</span>
    <span class="n">merge</span> <span class="o">=</span> <span class="n">true</span>
    <span class="n">dev</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Development&quot;</span>
    <span class="p">}</span>
    <span class="n">prod</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Production&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Application Configuration File</strong>:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">application_environments</span><span class="p">{</span>
    <span class="n">dev</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Dev&quot;</span>
        <span class="n">random_new_field</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="p">}</span>
    <span class="n">impl</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Implementation&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The application configuration has tried to add a new configuration to the <code class="docutils literal"><span class="pre">dev</span></code>
application environment as well as add their own <code class="docutils literal"><span class="pre">impl</span></code> environment.</p>
<p><strong>Resultant Configuration</strong>:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">application_environments</span><span class="p">{</span>
    <span class="n">dev</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Development&quot;</span>
    <span class="p">}</span>
    <span class="n">impl</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Implementation&quot;</span>
    <span class="p">}</span>
    <span class="n">prod</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Production&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">By setting <code class="docutils literal"><span class="pre">merge</span> <span class="pre">=</span> <span class="pre">true</span></code> the Governance Tier has allowed new keys to be added to
the <code class="docutils literal"><span class="pre">application_environments</span></code> block.  This meant that the <code class="docutils literal"><span class="pre">impl</span></code> application
environment was added as a new key but the modification to the <code class="docutils literal"><span class="pre">dev</span></code> environment
was ignored.  To allow this as well, the Governance Tier would specify <code class="docutils literal"><span class="pre">merge</span> <span class="pre">=</span> <span class="pre">true</span></code>
within the <code class="docutils literal"><span class="pre">dev</span></code> block.</p>
</div>
</div>
<div class="section" id="overridable-configurations">
<h2>3. Overridable Configurations<a class="headerlink" href="#overridable-configurations" title="Permalink to this headline">¶</a></h2>
<p>If the Governance Tier in this example was setting application environments as
reasonable defaults but was not interested in enforcing the use of these environments,
they could allow application configurations to take precedence by setting <code class="docutils literal"><span class="pre">override</span> <span class="pre">=</span> <span class="pre">true</span></code>
in the <code class="docutils literal"><span class="pre">application_environments</span></code> block.</p>
<p><strong>Governance Tier Configuration</strong>:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">application_environments</span><span class="p">{</span>
    <span class="n">override</span> <span class="o">=</span> <span class="n">true</span>
    <span class="n">dev</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Development&quot;</span>
    <span class="p">}</span>
    <span class="n">prod</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Production&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Application Configuration File</strong>:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">application_environments</span><span class="p">{</span>
    <span class="n">dev</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Dev&quot;</span>
        <span class="n">random_new_field</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="p">}</span>
    <span class="n">impl</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Implementation&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Resultant Configuration</strong>:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">application_environments</span><span class="p">{</span>
    <span class="n">dev</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Dev&quot;</span>
        <span class="n">random_new_field</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="p">}</span>
    <span class="n">impl</span><span class="p">{</span>
        <span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;Implementation&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You’ll notice that the resultant configuration equals that of the application’s configuration.
By setting <code class="docutils literal"><span class="pre">override</span> <span class="pre">=</span> <span class="pre">true</span></code> the <code class="docutils literal"><span class="pre">application_environments</span></code> value from the application replaced
that of the Governance Tier configuration.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Library_Development/index.html" class="btn btn-neutral float-right" title="Library Development" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Governance Model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Booz Allen Hamilton

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: v1.2
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../../../1.0.0/pages/Governance/conditional_inheritance.html">1.0.0</a></dd>
            <dd><a href="../../../1.1/pages/Governance/conditional_inheritance.html">1.1</a></dd>
            <dd><a href="../../../1.1.1/pages/Governance/conditional_inheritance.html">1.1.1</a></dd>
            <dd><a href="../../../1.3/pages/Governance/conditional_inheritance.html">1.3</a></dd>
            <dd><a href="../../../1.4/pages/Governance/conditional_inheritance.html">1.4</a></dd>
            <dd><a href="../../../1.4.1/pages/Governance/conditional_inheritance.html">1.4.1</a></dd>
            <dd><a href="../../../1.4.2/pages/Governance/conditional_inheritance.html">1.4.2</a></dd>
            <dd><a href="../../../1.5/pages/Governance/conditional_inheritance.html">1.5</a></dd>
            <dd><a href="conditional_inheritance.html">v1.2</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../../master/pages/Governance/conditional_inheritance.html">master</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>